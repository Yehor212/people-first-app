import{j as n}from"./ui-vendor-KfDTkiq1.js";import{r as j,a as W}from"./react-vendor-IF54zLUS.js";import{aT as H,f as B,g as z,u as P,X as q,y as M,aL as E,T as V,aU as O,aV as S,j as G,a as I,aW as A,m as T,aX as U,p as K}from"./index-UwLtZcXk.js";import"./charts-PQtVkfgh.js";import"./backend-CX_x5MVl.js";import"./animations-CRFQTM8M.js";const N=[{type:"streak",target:7,icon:"ðŸ”¥",title:{en:"7 Day Streak",ru:"7 Ð´Ð½ÐµÐ¹ Ð¿Ð¾Ð´Ñ€ÑÐ´",uk:"7 Ð´Ð½Ñ–Ð² Ð¿Ð¾ÑÐ¿Ñ–Ð»ÑŒ",es:"7 dÃ­as seguidos",de:"7 Tage Streak",fr:"7 jours consÃ©cutifs"},description:{en:"Complete your habits for 7 days in a row",ru:"Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÑÐ¹Ñ‚Ðµ Ð¿Ñ€Ð¸Ð²Ñ‹Ñ‡ÐºÐ¸ 7 Ð´Ð½ÐµÐ¹ Ð¿Ð¾Ð´Ñ€ÑÐ´",uk:"Ð’Ð¸ÐºÐ¾Ð½ÑƒÐ¹Ñ‚Ðµ Ð·Ð²Ð¸Ñ‡ÐºÐ¸ 7 Ð´Ð½Ñ–Ð² Ð¿Ð¾ÑÐ¿Ñ–Ð»ÑŒ",es:"Completa tus hÃ¡bitos durante 7 dÃ­as seguidos",de:"ErfÃ¼lle deine Gewohnheiten 7 Tage hintereinander",fr:"ComplÃ¨te tes habitudes pendant 7 jours consÃ©cutifs"},reward:"badge_streak_7"},{type:"streak",target:30,icon:"ðŸŒŸ",title:{en:"30 Day Challenge",ru:"30 Ð´Ð½ÐµÐ¹ Ð¿Ð¾Ð´Ñ€ÑÐ´",uk:"30 Ð´Ð½Ñ–Ð² Ð¿Ð¾ÑÐ¿Ñ–Ð»ÑŒ",es:"30 dÃ­as seguidos",de:"30 Tage Challenge",fr:"30 jours consÃ©cutifs"},description:{en:"Maintain your streak for a full month",ru:"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐ¹Ñ‚Ðµ ÑÐ²Ð¾Ð¹ ÑÑ‚Ñ€Ð¸Ðº Ñ†ÐµÐ»Ñ‹Ð¹ Ð¼ÐµÑÑÑ†",uk:"Ð—Ð±ÐµÑ€Ñ–Ð³Ð°Ð¹Ñ‚Ðµ ÑÐ²Ñ–Ð¹ ÑÑ‚Ñ€Ñ–Ðº Ñ†Ñ–Ð»Ð¸Ð¹ Ð¼Ñ–ÑÑÑ†ÑŒ",es:"MantÃ©n tu racha durante un mes completo",de:"Halte deinen Streak fÃ¼r einen ganzen Monat",fr:"Maintiens ta sÃ©rie pendant un mois complet"},reward:"badge_streak_30"},{type:"streak",target:100,icon:"ðŸ’Ž",title:{en:"100 Day Mastery",ru:"100 Ð´Ð½ÐµÐ¹ Ð¼Ð°ÑÑ‚ÐµÑ€ÑÑ‚Ð²Ð°",uk:"100 Ð´Ð½Ñ–Ð² Ð¼Ð°Ð¹ÑÑ‚ÐµÑ€Ð½Ð¾ÑÑ‚Ñ–",es:"100 dÃ­as de maestrÃ­a",de:"100 Tage Meisterschaft",fr:"100 jours de maÃ®trise"},description:{en:"Achieve legendary status with 100 days",ru:"Ð”Ð¾ÑÑ‚Ð¸Ð³Ð½Ð¸Ñ‚Ðµ Ð»ÐµÐ³ÐµÐ½Ð´Ð°Ñ€Ð½Ð¾Ð³Ð¾ ÑÑ‚Ð°Ñ‚ÑƒÑÐ° Ð·Ð° 100 Ð´Ð½ÐµÐ¹",uk:"Ð”Ð¾ÑÑÐ³Ð½Ñ–Ñ‚ÑŒ Ð»ÐµÐ³ÐµÐ½Ð´Ð°Ñ€Ð½Ð¾Ð³Ð¾ ÑÑ‚Ð°Ñ‚ÑƒÑÑƒ Ð·Ð° 100 Ð´Ð½Ñ–Ð²",es:"Alcanza el estatus legendario con 100 dÃ­as",de:"Erreiche legendÃ¤ren Status mit 100 Tagen",fr:"Atteins le statut lÃ©gendaire avec 100 jours"},reward:"badge_streak_100"},{type:"focus",target:300,icon:"ðŸŽ¯",title:{en:"5 Hours of Focus",ru:"5 Ñ‡Ð°ÑÐ¾Ð² Ñ„Ð¾ÐºÑƒÑÐ°",uk:"5 Ð³Ð¾Ð´Ð¸Ð½ Ñ„Ð¾ÐºÑƒÑÑƒ",es:"5 horas de enfoque",de:"5 Stunden Fokus",fr:"5 heures de concentration"},description:{en:"Complete 300 minutes of focused work",ru:"Ð—Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚Ðµ 300 Ð¼Ð¸Ð½ÑƒÑ‚ ÑÑ„Ð¾ÐºÑƒÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ð¹ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹",uk:"Ð—Ð°Ð²ÐµÑ€ÑˆÑ–Ñ‚ÑŒ 300 Ñ…Ð²Ð¸Ð»Ð¸Ð½ ÑÑ„Ð¾ÐºÑƒÑÐ¾Ð²Ð°Ð½Ð¾Ñ— Ñ€Ð¾Ð±Ð¾Ñ‚Ð¸",es:"Completa 300 minutos de trabajo concentrado",de:"SchlieÃŸe 300 Minuten fokussierte Arbeit ab",fr:"ComplÃ¨te 300 minutes de travail concentrÃ©"},reward:"badge_focus_300"},{type:"focus",target:1e3,icon:"âš¡",title:{en:"Focus Master",ru:"ÐœÐ°ÑÑ‚ÐµÑ€ Ñ„Ð¾ÐºÑƒÑÐ°",uk:"ÐœÐ°Ð¹ÑÑ‚ÐµÑ€ Ñ„Ð¾ÐºÑƒÑÑƒ",es:"Maestro del enfoque",de:"Fokus-Meister",fr:"MaÃ®tre de la concentration"},description:{en:"Accumulate 1000 minutes of deep work",ru:"ÐÐ°ÐºÐ¾Ð¿Ð¸Ñ‚Ðµ 1000 Ð¼Ð¸Ð½ÑƒÑ‚ Ð³Ð»ÑƒÐ±Ð¾ÐºÐ¾Ð¹ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹",uk:"ÐÐ°ÐºÐ¾Ð¿Ð¸Ñ‡Ñ–Ñ‚ÑŒ 1000 Ñ…Ð²Ð¸Ð»Ð¸Ð½ Ð³Ð»Ð¸Ð±Ð¾ÐºÐ¾Ñ— Ñ€Ð¾Ð±Ð¾Ñ‚Ð¸",es:"Acumula 1000 minutos de trabajo profundo",de:"Sammle 1000 Minuten konzentrierte Arbeit",fr:"Accumule 1000 minutes de travail profond"},reward:"badge_focus_1000"},{type:"gratitude",target:30,icon:"ðŸ™",title:{en:"30 Days of Gratitude",ru:"30 Ð´Ð½ÐµÐ¹ Ð±Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€Ð½Ð¾ÑÑ‚Ð¸",uk:"30 Ð´Ð½Ñ–Ð² Ð²Ð´ÑÑ‡Ð½Ð¾ÑÑ‚Ñ–",es:"30 dÃ­as de gratitud",de:"30 Tage Dankbarkeit",fr:"30 jours de gratitude"},description:{en:"Write 30 gratitude entries",ru:"ÐÐ°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ 30 Ð·Ð°Ð¿Ð¸ÑÐµÐ¹ Ð±Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€Ð½Ð¾ÑÑ‚Ð¸",uk:"ÐÐ°Ð¿Ð¸ÑˆÑ–Ñ‚ÑŒ 30 Ð·Ð°Ð¿Ð¸ÑÑ–Ð² Ð²Ð´ÑÑ‡Ð½Ð¾ÑÑ‚Ñ–",es:"Escribe 30 entradas de gratitud",de:"Schreibe 30 DankbarkeitseintrÃ¤ge",fr:"Ã‰cris 30 entrÃ©es de gratitude"},reward:"badge_gratitude_30"},{type:"gratitude",target:100,icon:"âœ¨",title:{en:"Gratitude Champion",ru:"Ð§ÐµÐ¼Ð¿Ð¸Ð¾Ð½ Ð±Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€Ð½Ð¾ÑÑ‚Ð¸",uk:"Ð§ÐµÐ¼Ð¿Ñ–Ð¾Ð½ Ð²Ð´ÑÑ‡Ð½Ð¾ÑÑ‚Ñ–",es:"CampeÃ³n de gratitud",de:"Dankbarkeits-Champion",fr:"Champion de la gratitude"},description:{en:"Reach 100 gratitude reflections",ru:"Ð”Ð¾ÑÑ‚Ð¸Ð³Ð½Ð¸Ñ‚Ðµ 100 Ñ€Ð°Ð·Ð¼Ñ‹ÑˆÐ»ÐµÐ½Ð¸Ð¹ Ð¾ Ð±Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€Ð½Ð¾ÑÑ‚Ð¸",uk:"Ð”Ð¾ÑÑÐ³Ð½Ñ–Ñ‚ÑŒ 100 Ñ€Ð¾Ð·Ð´ÑƒÐ¼Ñ–Ð² Ð¿Ñ€Ð¾ Ð²Ð´ÑÑ‡Ð½Ñ–ÑÑ‚ÑŒ",es:"Alcanza 100 reflexiones de gratitud",de:"Erreiche 100 Dankbarkeitsreflexionen",fr:"Atteins 100 rÃ©flexions de gratitude"},reward:"badge_gratitude_100"},{type:"total",target:50,icon:"ðŸ’ª",title:{en:"50 Habit Completions",ru:"50 Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ð¹ Ð¿Ñ€Ð¸Ð²Ñ‹Ñ‡ÐµÐº",uk:"50 Ð²Ð¸ÐºÐ¾Ð½Ð°Ð½ÑŒ Ð·Ð²Ð¸Ñ‡Ð¾Ðº",es:"50 completaciones de hÃ¡bitos",de:"50 GewohnheitsabschlÃ¼sse",fr:"50 complÃ©tions d'habitudes"},description:{en:"Complete any habits 50 times total",ru:"Ð’Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ Ð»ÑŽÐ±Ñ‹Ðµ Ð¿Ñ€Ð¸Ð²Ñ‹Ñ‡ÐºÐ¸ 50 Ñ€Ð°Ð·",uk:"Ð’Ð¸ÐºÐ¾Ð½Ð°Ð¹Ñ‚Ðµ Ð±ÑƒÐ´ÑŒ-ÑÐºÑ– Ð·Ð²Ð¸Ñ‡ÐºÐ¸ 50 Ñ€Ð°Ð·Ñ–Ð²",es:"Completa cualquier hÃ¡bito 50 veces en total",de:"SchlieÃŸe beliebige Gewohnheiten 50 Mal ab",fr:"ComplÃ¨te n'importe quelle habitude 50 fois au total"},reward:"badge_habit_50"},{type:"total",target:200,icon:"ðŸ†",title:{en:"Habit Hero",ru:"Ð“ÐµÑ€Ð¾Ð¹ Ð¿Ñ€Ð¸Ð²Ñ‹Ñ‡ÐµÐº",uk:"Ð“ÐµÑ€Ð¾Ð¹ Ð·Ð²Ð¸Ñ‡Ð¾Ðº",es:"HÃ©roe de hÃ¡bitos",de:"Gewohnheits-Held",fr:"HÃ©ros des habitudes"},description:{en:"Reach 200 total habit completions",ru:"Ð”Ð¾ÑÑ‚Ð¸Ð³Ð½Ð¸Ñ‚Ðµ 200 Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ð¹ Ð¿Ñ€Ð¸Ð²Ñ‹Ñ‡ÐµÐº",uk:"Ð”Ð¾ÑÑÐ³Ð½Ñ–Ñ‚ÑŒ 200 Ð²Ð¸ÐºÐ¾Ð½Ð°Ð½ÑŒ Ð·Ð²Ð¸Ñ‡Ð¾Ðº",es:"Alcanza 200 completaciones totales de hÃ¡bitos",de:"Erreiche 200 GewohnheitsabschlÃ¼sse insgesamt",fr:"Atteins 200 complÃ©tions d'habitudes au total"},reward:"badge_habit_200"}];function X(o,c){return{...N[o],id:H("challenge"),progress:0,startDate:B(new Date),completed:!1,habitId:c}}function k(o,c,t){let s=t.initialDeps??[],e,i=!0;function l(){var a,h,f;let u;t.key&&((a=t.debug)!=null&&a.call(t))&&(u=Date.now());const b=o();if(!(b.length!==s.length||b.some((v,g)=>s[g]!==v)))return e;s=b;let p;if(t.key&&((h=t.debug)!=null&&h.call(t))&&(p=Date.now()),e=c(...b),t.key&&((f=t.debug)!=null&&f.call(t))){const v=Math.round((Date.now()-u)*100)/100,g=Math.round((Date.now()-p)*100)/100,r=g/16,x=(m,y)=>{for(m=String(m);m.length<y;)m=" "+m;return m};console.info(`%câ± ${x(g,5)} /${x(v,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*r,120))}deg 100% 31%);`,t?.key)}return t?.onChange&&!(i&&t.skipInitialOnChange)&&t.onChange(e),i=!1,e}return l.updateDeps=a=>{s=a},l}function _(o,c){if(o===void 0)throw new Error("Unexpected undefined");return o}const Y=(o,c)=>Math.abs(o-c)<1.01,Z=(o,c,t)=>{let s;return function(...e){o.clearTimeout(s),s=o.setTimeout(()=>c.apply(this,e),t)}},F=o=>{const{offsetWidth:c,offsetHeight:t}=o;return{width:c,height:t}},J=o=>o,Q=o=>{const c=Math.max(o.startIndex-o.overscan,0),t=Math.min(o.endIndex+o.overscan,o.count-1),s=[];for(let e=c;e<=t;e++)s.push(e);return s},ee=(o,c)=>{const t=o.scrollElement;if(!t)return;const s=o.targetWindow;if(!s)return;const e=l=>{const{width:a,height:h}=l;c({width:Math.round(a),height:Math.round(h)})};if(e(F(t)),!s.ResizeObserver)return()=>{};const i=new s.ResizeObserver(l=>{const a=()=>{const h=l[0];if(h?.borderBoxSize){const f=h.borderBoxSize[0];if(f){e({width:f.inlineSize,height:f.blockSize});return}}e(F(t))};o.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()});return i.observe(t,{box:"border-box"}),()=>{i.unobserve(t)}},D={passive:!0},R=typeof window>"u"?!0:"onscrollend"in window,te=(o,c)=>{const t=o.scrollElement;if(!t)return;const s=o.targetWindow;if(!s)return;let e=0;const i=o.options.useScrollendEvent&&R?()=>{}:Z(s,()=>{c(e,!1)},o.options.isScrollingResetDelay),l=u=>()=>{const{horizontal:b,isRtl:d}=o.options;e=b?t.scrollLeft*(d&&-1||1):t.scrollTop,i(),c(e,u)},a=l(!0),h=l(!1);t.addEventListener("scroll",a,D);const f=o.options.useScrollendEvent&&R;return f&&t.addEventListener("scrollend",h,D),()=>{t.removeEventListener("scroll",a),f&&t.removeEventListener("scrollend",h)}},se=(o,c,t)=>{if(c?.borderBoxSize){const s=c.borderBoxSize[0];if(s)return Math.round(s[t.options.horizontal?"inlineSize":"blockSize"])}return o[t.options.horizontal?"offsetWidth":"offsetHeight"]},ne=(o,{adjustments:c=0,behavior:t},s)=>{var e,i;const l=o+c;(i=(e=s.scrollElement)==null?void 0:e.scrollTo)==null||i.call(e,{[s.options.horizontal?"left":"top"]:l,behavior:t})};class ie{constructor(c){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.currentScrollToIndex=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const s=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(e=>{e.forEach(i=>{const l=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()})}));return{disconnect:()=>{var e;(e=s())==null||e.disconnect(),t=null},observe:e=>{var i;return(i=s())==null?void 0:i.observe(e,{box:"border-box"})},unobserve:e=>{var i;return(i=s())==null?void 0:i.unobserve(e)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([s,e])=>{typeof e>"u"&&delete t[s]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:J,rangeExtractor:Q,onChange:()=>{},measureElement:se,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var s,e;(e=(s=this.options).onChange)==null||e.call(s,this,t)},this.maybeNotify=k(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const s=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==s){if(this.cleanup(),!s){this.maybeNotify();return}this.scrollElement=s,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(e=>{this.observer.observe(e)}),this.unsubs.push(this.options.observeElementRect(this,e=>{this.scrollRect=e,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(e,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<e?"forward":"backward":null,this.scrollOffset=e,this.isScrolling=i,this.maybeNotify()})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0})}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,s)=>{const e=new Map,i=new Map;for(let l=s-1;l>=0;l--){const a=t[l];if(e.has(a.lane))continue;const h=i.get(a.lane);if(h==null||a.end>h.end?i.set(a.lane,a):a.end<h.end&&e.set(a.lane,!0),e.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((l,a)=>l.end===a.end?l.index-a.index:l.end-a.end)[0]:void 0},this.getMeasurementOptions=k(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(t,s,e,i,l,a)=>(this.prevLanes!==void 0&&this.prevLanes!==a&&(this.lanesChangedFlag=!0),this.prevLanes=a,this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:s,scrollMargin:e,getItemKey:i,enabled:l,lanes:a}),{key:!1}),this.getMeasurements=k(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:s,scrollMargin:e,getItemKey:i,enabled:l,lanes:a},h)=>{if(!l)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>t)for(const d of this.laneAssignments.keys())d>=t&&this.laneAssignments.delete(d);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&!this.lanesSettling&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(d=>{this.itemSizeCache.set(d.key,d.size)}));const f=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===t&&(this.lanesSettling=!1);const u=this.measurementsCache.slice(0,f),b=new Array(a).fill(void 0);for(let d=0;d<f;d++){const p=u[d];p&&(b[p.lane]=d)}for(let d=f;d<t;d++){const p=i(d),v=this.laneAssignments.get(d);let g,r;if(v!==void 0&&this.options.lanes>1){g=v;const w=b[g],C=w!==void 0?u[w]:void 0;r=C?C.end+this.options.gap:s+e}else{const w=this.options.lanes===1?u[d-1]:this.getFurthestMeasurement(u,d);r=w?w.end+this.options.gap:s+e,g=w?w.lane:d%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(d,g)}const x=h.get(p),m=typeof x=="number"?x:this.options.estimateSize(d),y=r+m;u[d]={index:d,start:r,size:m,end:y,key:p,lane:g},b[g]=d}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=k(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,s,e,i)=>this.range=t.length>0&&s>0?re({measurements:t,outerSize:s,scrollOffset:e,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=k(()=>{let t=null,s=null;const e=this.calculateRange();return e&&(t=e.startIndex,s=e.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,s]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,s]},(t,s,e,i,l)=>i===null||l===null?[]:t({startIndex:i,endIndex:l,overscan:s,count:e}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const s=this.options.indexAttribute,e=t.getAttribute(s);return e?parseInt(e,10):(console.warn(`Missing attribute name '${s}={index}' on measured element.`),-1)},this._measureElement=(t,s)=>{const e=this.indexFromElement(t),i=this.measurementsCache[e];if(!i)return;const l=i.key,a=this.elementsCache.get(l);a!==t&&(a&&this.observer.unobserve(a),this.observer.observe(t),this.elementsCache.set(l,t)),t.isConnected&&this.resizeItem(e,this.options.measureElement(t,s,this))},this.resizeItem=(t,s)=>{const e=this.measurementsCache[t];if(!e)return;const i=this.itemSizeCache.get(e.key)??e.size,l=s-i;l!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(e,l,this):e.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=l,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(e.index),this.itemSizeCache=new Map(this.itemSizeCache.set(e.key,s)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((s,e)=>{s.isConnected||(this.observer.unobserve(s),this.elementsCache.delete(e))});return}this._measureElement(t,void 0)},this.getVirtualItems=k(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,s)=>{const e=[];for(let i=0,l=t.length;i<l;i++){const a=t[i],h=s[a];e.push(h)}return e},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const s=this.getMeasurements();if(s.length!==0)return _(s[$(0,s.length-1,e=>_(s[e]).start,t)])},this.getMaxScrollOffset=()=>{if(!this.scrollElement)return 0;if("scrollHeight"in this.scrollElement)return this.options.horizontal?this.scrollElement.scrollWidth-this.scrollElement.clientWidth:this.scrollElement.scrollHeight-this.scrollElement.clientHeight;{const t=this.scrollElement.document.documentElement;return this.options.horizontal?t.scrollWidth-this.scrollElement.innerWidth:t.scrollHeight-this.scrollElement.innerHeight}},this.getOffsetForAlignment=(t,s,e=0)=>{if(!this.scrollElement)return 0;const i=this.getSize(),l=this.getScrollOffset();s==="auto"&&(s=t>=l+i?"end":"start"),s==="center"?t+=(e-i)/2:s==="end"&&(t-=i);const a=this.getMaxScrollOffset();return Math.max(Math.min(a,t),0)},this.getOffsetForIndex=(t,s="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const e=this.measurementsCache[t];if(!e)return;const i=this.getSize(),l=this.getScrollOffset();if(s==="auto")if(e.end>=l+i-this.options.scrollPaddingEnd)s="end";else if(e.start<=l+this.options.scrollPaddingStart)s="start";else return[l,s];if(s==="end"&&t===this.options.count-1)return[this.getMaxScrollOffset(),s];const a=s==="end"?e.end+this.options.scrollPaddingEnd:e.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(a,s,e.size),s]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(t,{align:s="start",behavior:e}={})=>{e==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,s),{adjustments:void 0,behavior:e})},this.scrollToIndex=(t,{align:s="auto",behavior:e}={})=>{e==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t=Math.max(0,Math.min(t,this.options.count-1)),this.currentScrollToIndex=t;let i=0;const l=10,a=f=>{if(!this.targetWindow)return;const u=this.getOffsetForIndex(t,f);if(!u){console.warn("Failed to get offset for index:",t);return}const[b,d]=u;this._scrollToOffset(b,{adjustments:void 0,behavior:e}),this.targetWindow.requestAnimationFrame(()=>{const p=()=>{if(this.currentScrollToIndex!==t)return;const v=this.getScrollOffset(),g=this.getOffsetForIndex(t,d);if(!g){console.warn("Failed to get offset for index:",t);return}Y(g[0],v)||h(d)};this.isDynamicMode()?this.targetWindow.requestAnimationFrame(p):p()})},h=f=>{this.targetWindow&&this.currentScrollToIndex===t&&(i++,i<l?this.targetWindow.requestAnimationFrame(()=>a(f)):console.warn(`Failed to scroll to index ${t} after ${l} attempts.`))};a(s)},this.scrollBy=(t,{behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:s})},this.getTotalSize=()=>{var t;const s=this.getMeasurements();let e;if(s.length===0)e=this.options.paddingStart;else if(this.options.lanes===1)e=((t=s[s.length-1])==null?void 0:t.end)??0;else{const i=Array(this.options.lanes).fill(null);let l=s.length-1;for(;l>=0&&i.some(a=>a===null);){const a=s[l];i[a.lane]===null&&(i[a.lane]=a.end),l--}e=Math.max(...i.filter(a=>a!==null))}return Math.max(e-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:s,behavior:e})=>{this.options.scrollToFn(t,{behavior:e,adjustments:s},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(c)}}const $=(o,c,t,s)=>{for(;o<=c;){const e=(o+c)/2|0,i=t(e);if(i<s)o=e+1;else if(i>s)c=e-1;else return e}return o>0?o-1:0};function re({measurements:o,outerSize:c,scrollOffset:t,lanes:s}){const e=o.length-1,i=h=>o[h].start;if(o.length<=s)return{startIndex:0,endIndex:e};let l=$(0,e,i,t),a=l;if(s===1)for(;a<e&&o[a].end<t+c;)a++;else if(s>1){const h=Array(s).fill(0);for(;a<e&&h.some(u=>u<t+c);){const u=o[a];h[u.lane]=u.end,a++}const f=Array(s).fill(t+c);for(;l>=0&&f.some(u=>u>=t);){const u=o[l];f[u.lane]=u.start,l--}l=Math.max(0,l-l%s),a=Math.min(e,a+(s-1-a%s))}return{startIndex:l,endIndex:a}}const L=typeof document<"u"?j.useLayoutEffect:j.useEffect;function le({useFlushSync:o=!0,...c}){const t=j.useReducer(()=>({}),{})[1],s={...c,onChange:(i,l)=>{var a;o&&l?W.flushSync(t):t(),(a=c.onChange)==null||a.call(c,i,l)}},[e]=j.useState(()=>new ie(s));return e.setOptions(s),L(()=>e._didMount(),[]),L(()=>e._willUpdate()),e}function ae(o){return le({observeElementRect:ee,observeElementOffset:te,scrollToFn:ne,...o})}function oe({items:o,renderItem:c,itemHeight:t,columns:s,gap:e=12,className:i,containerClassName:l,overscan:a=3,getItemKey:h}){const f=j.useRef(null),u=Math.ceil(o.length/s),b=ae({count:u,getScrollElement:()=>f.current,estimateSize:()=>t+e,overscan:a}),d=b.getVirtualItems();return n.jsx("div",{ref:f,className:z("overflow-auto",l),children:n.jsx("div",{className:z("relative w-full",i),style:{height:`${b.getTotalSize()}px`},children:d.map(p=>{const g=p.index*s,r=o.slice(g,g+s);return n.jsx("div",{className:"absolute top-0 left-0 w-full",style:{height:`${p.size-e}px`,transform:`translateY(${p.start}px)`},children:n.jsxs("div",{className:"grid h-full",style:{gridTemplateColumns:`repeat(${s}, minmax(0, 1fr))`,gap:`${e}px`},children:[r.map((x,m)=>{const y=g+m;return n.jsx("div",{className:"h-full",children:c(x,y)},h?h(x,y):y)}),r.length<s&&Array.from({length:s-r.length}).map((x,m)=>n.jsx("div",{className:"h-full"},`empty-${m}`))]})},p.key)})})})}const ce=50;function de(o){return o>=ce}function xe({activeChallenges:o,badges:c,onStartChallenge:t,onClose:s}){const{t:e,language:i}=P(),[l,a]=j.useState("active"),[h,f]=j.useState(!1),[u,b]=j.useState(null),d=r=>{K(),b(r),f(!0)},p=r=>Math.min(100,Math.round(r.progress/r.target*100)),v=r=>{switch(r){case"streak":return e.challengeTypeStreak||"Streak";case"focus":return e.challengeTypeFocus||"Focus";case"gratitude":return e.challengeTypeGratitude||"Gratitude";case"total":return e.challengeTypeTotal||"Total";default:return"Challenge"}},g=r=>{const x=N[r];return o.some(m=>m.type===x.type&&m.target===x.target&&!m.completed)};return n.jsxs("div",{role:"dialog","aria-modal":"true","aria-labelledby":"challenges-title",className:"fixed inset-0 bg-background/95 backdrop-blur-sm z-[60] flex items-center justify-center p-4 animate-fade-in",children:[n.jsxs("div",{className:"w-full max-w-2xl max-h-[90vh] flex flex-col bg-card rounded-3xl zen-shadow-card overflow-hidden",children:[n.jsxs("div",{className:"zen-gradient p-6 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{id:"challenges-title",className:"text-2xl font-bold text-primary-foreground mb-1",children:e.challengesTitle||"Challenges & Badges"}),n.jsx("p",{className:"text-sm text-primary-foreground/80",children:e.challengesSubtitle||"Take on challenges and earn badges"})]}),n.jsx("button",{onClick:s,"aria-label":e.close||"Close",className:"p-2 rounded-xl bg-white/10 hover:bg-white/20 transition-colors",children:n.jsx(q,{className:"w-6 h-6 text-primary-foreground"})})]}),n.jsxs("div",{className:"flex gap-2 p-4 border-b border-border overflow-x-auto scrollbar-hide",children:[n.jsx("button",{onClick:()=>a("active"),className:`flex-shrink-0 py-2.5 px-3 rounded-xl font-medium text-sm transition-all ${l==="active"?"bg-primary text-primary-foreground zen-shadow":"bg-secondary text-secondary-foreground hover:bg-muted"}`,children:n.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[n.jsx(M,{className:"w-4 h-4"}),e.activeChallenges||"Active",o.length>0&&n.jsx("span",{className:"bg-primary-foreground/20 px-1.5 py-0.5 rounded-full text-xs",children:o.length})]})}),n.jsx("button",{onClick:()=>a("available"),className:`flex-shrink-0 py-2.5 px-3 rounded-xl font-medium text-sm transition-all ${l==="available"?"bg-primary text-primary-foreground zen-shadow":"bg-secondary text-secondary-foreground hover:bg-muted"}`,children:n.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[n.jsx(E,{className:"w-4 h-4"}),e.availableChallenges||"Available"]})}),n.jsx("button",{onClick:()=>a("badges"),className:`flex-shrink-0 py-2.5 px-3 rounded-xl font-medium text-sm transition-all ${l==="badges"?"bg-primary text-primary-foreground zen-shadow":"bg-secondary text-secondary-foreground hover:bg-muted"}`,children:n.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[n.jsx(V,{className:"w-4 h-4"}),e.badges||"Badges",c.filter(r=>r.unlocked).length>0&&n.jsx("span",{className:"bg-primary-foreground/20 px-1.5 py-0.5 rounded-full text-xs",children:c.filter(r=>r.unlocked).length})]})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[l==="active"&&n.jsx(n.Fragment,{children:o.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-6xl mb-4",children:"ðŸŽ¯"}),n.jsx("p",{className:"text-lg font-semibold text-foreground mb-2",children:e.noChallengesActive||"No Active Challenges"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:e.noChallengesActiveHint||"Start a challenge to track your progress"})]}):o.map(r=>{const x=p(r),m=r.reward?O(r.reward):void 0;return n.jsx("div",{className:"bg-secondary rounded-2xl p-4 zen-shadow-card hover:zen-shadow-hover transition-all",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"text-4xl",children:r.icon}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-foreground",children:r.title[i]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:r.description[i]})]}),n.jsx("span",{className:"text-xs px-2 py-1 rounded-lg bg-primary/10 text-primary font-medium",children:v(r.type)})]}),n.jsxs("div",{className:"mt-3 mb-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[n.jsx("span",{className:"text-muted-foreground",children:e.progress||"Progress"}),n.jsxs("span",{className:"font-semibold text-foreground",children:[r.progress," / ",r.target]})]}),n.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full zen-gradient transition-all duration-500",style:{width:`${x}%`}})})]}),m&&n.jsxs("div",{className:"flex items-center gap-2 mt-3 p-2 bg-card rounded-xl",children:[n.jsx("div",{className:"text-2xl",children:m.icon}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:e.reward||"Reward"}),n.jsx("p",{className:`text-sm font-semibold ${S(m.rarity)}`,children:m.title[i]})]})]})]})]})},r.id)})}),l==="available"&&n.jsx(n.Fragment,{children:N.map((r,x)=>{const m=g(x),y=r.reward?O(r.reward):void 0;return n.jsx("div",{className:`bg-secondary rounded-2xl p-4 zen-shadow-card transition-all ${m?"opacity-50":"hover:zen-shadow-hover"}`,children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"text-4xl",children:r.icon}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-foreground",children:r.title[i]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:r.description[i]})]}),n.jsx("span",{className:"text-xs px-2 py-1 rounded-lg bg-primary/10 text-primary font-medium",children:v(r.type)})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-3",children:[n.jsx(M,{className:"w-4 h-4"}),n.jsxs("span",{children:[e.target||"Target",": ",n.jsx("span",{className:"font-semibold text-foreground",children:r.target})]})]}),y&&n.jsxs("div",{className:"flex items-center gap-2 mb-3 p-2 bg-card rounded-xl",children:[n.jsx("div",{className:"text-2xl",children:y.icon}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:e.reward||"Reward"}),n.jsx("p",{className:`text-sm font-semibold ${S(y.rarity)}`,children:y.title[i]})]})]}),n.jsx("button",{onClick:()=>{if(!m){const w=X(x);t(w)}},disabled:m,className:`w-full py-2 rounded-xl font-medium transition-all ${m?"bg-muted text-muted-foreground cursor-not-allowed":"bg-primary text-primary-foreground hover:opacity-90 zen-shadow"}`,children:m?n.jsxs("span",{className:"flex items-center justify-center gap-2",children:[n.jsx(G,{className:"w-4 h-4"}),e.challengeActive||"Active"]}):n.jsxs("span",{className:"flex items-center justify-center gap-2",children:[n.jsx(E,{className:"w-4 h-4"}),e.startChallenge||"Start Challenge"]})})]})]})},x)})}),l==="badges"&&n.jsx(n.Fragment,{children:de(c.length)?n.jsx(oe,{items:c,columns:2,itemHeight:180,gap:12,containerClassName:"h-full",getItemKey:r=>r.id,renderItem:r=>n.jsxs("div",{className:`relative bg-secondary rounded-2xl p-4 zen-shadow-card transition-all h-full ${r.unlocked?"hover:zen-shadow-hover":"opacity-50"}`,children:[r.unlocked&&n.jsx("button",{onClick:()=>d(r),className:"absolute top-2 right-2 p-1.5 rounded-full bg-primary/10 hover:bg-primary/20 text-primary transition-colors","aria-label":e.shareButton||"Share",children:n.jsx(I,{className:"w-3.5 h-3.5"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:`text-5xl mb-3 ${!r.unlocked&&"grayscale"}`,children:r.unlocked?r.icon:n.jsx(A,{className:"w-12 h-12 mx-auto text-muted-foreground"})}),n.jsx("h3",{className:`font-semibold mb-1 ${r.unlocked?S(r.rarity):"text-muted-foreground"}`,children:r.title[i]}),n.jsx("p",{className:"text-xs text-muted-foreground mb-2 line-clamp-2",children:r.description[i]}),r.unlocked&&r.unlockedDate&&n.jsx("p",{className:"text-xs text-primary",children:new Date(r.unlockedDate).toLocaleDateString(T(i))}),!r.unlocked&&n.jsxs("p",{className:"text-xs text-muted-foreground line-clamp-1",children:[e.requirement||"Requirement",": ",r.requirement]})]})]})}):n.jsx("div",{className:"grid grid-cols-2 gap-3",children:c.map(r=>n.jsxs("div",{className:`relative bg-secondary rounded-2xl p-4 zen-shadow-card transition-all ${r.unlocked?"hover:zen-shadow-hover":"opacity-50"}`,children:[r.unlocked&&n.jsx("button",{onClick:()=>d(r),className:"absolute top-2 right-2 p-1.5 rounded-full bg-primary/10 hover:bg-primary/20 text-primary transition-colors","aria-label":e.shareButton||"Share",children:n.jsx(I,{className:"w-3.5 h-3.5"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:`text-5xl mb-3 ${!r.unlocked&&"grayscale"}`,children:r.unlocked?r.icon:n.jsx(A,{className:"w-12 h-12 mx-auto text-muted-foreground"})}),n.jsx("h3",{className:`font-semibold mb-1 ${r.unlocked?S(r.rarity):"text-muted-foreground"}`,children:r.title[i]}),n.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:r.description[i]}),r.unlocked&&r.unlockedDate&&n.jsx("p",{className:"text-xs text-primary",children:new Date(r.unlockedDate).toLocaleDateString(T(i))}),!r.unlocked&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.requirement||"Requirement",": ",r.requirement]})]})]},r.id))})})]})]}),u&&n.jsx(U,{open:h,onOpenChange:f,mode:"achievement",badge:u})]})}export{xe as ChallengesPanel};
