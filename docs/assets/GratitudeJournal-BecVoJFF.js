import{j as e}from"./ui-vendor-KfDTkiq1.js";import{r as n}from"./react-vendor-IF54zLUS.js";import{u as k,aG as v,aH as L,aI as N,aJ as y,w,V as z,U as I,g,aK as J,z as R,a6 as T,S as U,aL as D,aM as F,aN as A,l as H,aO as M,aP as O}from"./index-UwLtZcXk.js";import"./charts-PQtVkfgh.js";import"./backend-CX_x5MVl.js";import"./animations-CRFQTM8M.js";function V({onUsePrompt:x,category:i,compact:r=!1}){const{language:o,t:l}=k(),[t,d]=n.useState(!r),[a,f]=n.useState(()=>i?v(i):L()),c=n.useCallback(()=>{f(v(i))},[i]),m=n.useCallback(()=>{const h=N(a,o);x(h)},[a,o,x]),u=N(a,o),p=y[a.category][o]||y[a.category].en;return r&&!t?e.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 px-3 py-2 text-sm text-muted-foreground hover:text-foreground bg-secondary/50 hover:bg-secondary rounded-lg transition-colors",children:[e.jsx(w,{className:"w-4 h-4"}),e.jsx("span",{children:l.needInspiration||"Need inspiration?"}),e.jsx(z,{className:"w-4 h-4"})]}):e.jsxs("div",{className:"bg-gradient-to-r from-accent/10 to-primary/10 rounded-xl p-4 border border-accent/20 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4 text-accent"}),e.jsx("span",{className:"text-sm font-medium text-accent",children:l.journalPrompt||"Prompt"}),e.jsx("span",{className:"text-xs px-2 py-0.5 bg-secondary rounded-full text-muted-foreground",children:p})]}),r&&e.jsx("button",{onClick:()=>d(!1),className:"p-1 hover:bg-secondary/50 rounded transition-colors",children:e.jsx(I,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:g("text-foreground leading-relaxed mb-4",r?"text-sm":"text-base"),children:['"',u,'"']}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:m,className:"flex-1 py-2 px-4 bg-accent/20 text-accent hover:bg-accent/30 rounded-lg font-medium text-sm transition-colors",children:l.usePrompt||"Use this prompt"}),e.jsx("button",{onClick:c,className:"p-2 bg-secondary hover:bg-muted rounded-lg transition-colors",title:l.shufflePrompt||"Get another prompt",children:e.jsx(J,{className:"w-4 h-4"})})]})]})}function Q({entries:x,onAddEntry:i,isPrimaryCTA:r=!1,initialText:o,onInitialTextUsed:l}){const{t}=k(),[d,a]=n.useState(""),[f,c]=n.useState(!1),[m,u]=n.useState(null);n.useEffect(()=>{o&&(a(o+`

`),c(!0),l?.())},[o,l]);const p=R(),h=x.filter(s=>s.date===p),j=x.slice(-5).reverse(),E=n.useCallback(s=>{a(s+`

`)},[]),C=()=>{const s=d.trim();if(!s)return;u(null);const b=A.safeParse(s);if(!b.success){H.warn("[GratitudeJournal] Invalid gratitude text:",b.error.message);const G=s.length>2e3?t.textTooLong:t.invalidInput;u(G),setTimeout(()=>u(null),3e3);return}const S=M(b.data),P={id:O(),text:S,date:p,timestamp:Date.now()};i(P),a(""),c(!1)};return e.jsxs("div",{className:g("rounded-2xl p-6 animate-fade-in transition-all relative overflow-hidden",r?"bg-gradient-to-br from-pink-500/15 via-card to-rose-500/15 ring-2 ring-pink-500/40 shadow-lg shadow-pink-500/20":"bg-card zen-shadow-card"),children:[r&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-pink-500/5 via-transparent to-rose-500/5 animate-pulse"}),r&&e.jsx("div",{className:"relative flex items-center justify-center gap-2 mb-4",children:e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-pink-500/25 rounded-full border border-pink-500/30",children:[e.jsx(T,{className:"w-4 h-4 text-pink-500"}),e.jsx("span",{className:"text-sm font-bold text-pink-600 dark:text-pink-400",children:t.startHere})]})}),e.jsxs("div",{className:"flex items-center justify-between mb-4 relative",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5 text-accent"}),e.jsx("h3",{className:g("font-semibold text-foreground",r?"text-xl":"text-lg"),children:t.gratitude})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[h.length," ",t.today]})]}),f?e.jsxs("div",{className:"animate-scale-in space-y-3",children:[!d.trim()&&e.jsx(V,{onUsePrompt:E,category:"gratitude",compact:!0}),e.jsx("textarea",{value:d,onChange:s=>{a(s.target.value),m&&u(null)},placeholder:t.iAmGratefulFor,className:g("w-full p-4 bg-secondary rounded-lg text-foreground placeholder:text-muted-foreground resize-none focus:outline-none focus:ring-2 transition-all",m?"ring-2 ring-destructive/50 focus:ring-destructive/50":"focus:ring-accent/30"),rows:3,autoFocus:!0}),m&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 mt-2 bg-destructive/10 border border-destructive/20 rounded-lg text-sm text-destructive animate-fade-in",children:[e.jsx(F,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:m})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{onClick:()=>c(!1),className:"flex-1 py-2 bg-secondary text-secondary-foreground rounded-xl hover:bg-muted transition-colors",children:t.cancel}),e.jsx("button",{onClick:C,disabled:!d.trim(),className:"flex-1 py-2 zen-gradient-warm text-primary-foreground font-medium rounded-xl disabled:opacity-50 transition-opacity",children:t.save})]})]}):e.jsxs("button",{onClick:()=>c(!0),className:"w-full p-4 border-2 border-dashed border-border rounded-xl text-muted-foreground hover:border-primary hover:text-primary transition-colors flex items-center justify-center gap-2",children:[e.jsx(D,{className:"w-5 h-5"}),e.jsx("span",{children:t.whatAreYouGratefulFor})]}),j.length>0&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.recentEntries,":"]}),j.map(s=>e.jsxs("div",{className:"p-3 bg-secondary/50 rounded-lg text-sm text-foreground",children:["âœ¨ ",s.text]},s.id))]})]})}export{Q as GratitudeJournal};
